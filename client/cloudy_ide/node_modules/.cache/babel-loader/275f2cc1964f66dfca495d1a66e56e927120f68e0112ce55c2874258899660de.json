{"ast":null,"code":"/**\n * Isomorphic logging module with support for colors!\n *\n * @module logging\n */\n\nimport * as env from './environment.js';\nimport * as set from './set.js';\nimport * as symbol from './symbol.js';\nimport * as pair from './pair.js';\nimport * as dom from './dom.js';\nimport * as json from './json.js';\nimport * as map from './map.js';\nimport * as eventloop from './eventloop.js';\nimport * as math from './math.js';\nimport * as time from './time.js';\nimport * as func from './function.js';\nexport const BOLD = symbol.create();\nexport const UNBOLD = symbol.create();\nexport const BLUE = symbol.create();\nexport const GREY = symbol.create();\nexport const GREEN = symbol.create();\nexport const RED = symbol.create();\nexport const PURPLE = symbol.create();\nexport const ORANGE = symbol.create();\nexport const UNCOLOR = symbol.create();\n\n/**\n * @type {Object<Symbol,pair.Pair<string,string>>}\n */\nconst _browserStyleMap = {\n  [BOLD]: pair.create('font-weight', 'bold'),\n  [UNBOLD]: pair.create('font-weight', 'normal'),\n  [BLUE]: pair.create('color', 'blue'),\n  [GREEN]: pair.create('color', 'green'),\n  [GREY]: pair.create('color', 'grey'),\n  [RED]: pair.create('color', 'red'),\n  [PURPLE]: pair.create('color', 'purple'),\n  [ORANGE]: pair.create('color', 'orange'),\n  // not well supported in chrome when debugging node with inspector - TODO: deprecate\n  [UNCOLOR]: pair.create('color', 'black')\n};\nconst _nodeStyleMap = {\n  [BOLD]: '\\u001b[1m',\n  [UNBOLD]: '\\u001b[2m',\n  [BLUE]: '\\x1b[34m',\n  [GREEN]: '\\x1b[32m',\n  [GREY]: '\\u001b[37m',\n  [RED]: '\\x1b[31m',\n  [PURPLE]: '\\x1b[35m',\n  [ORANGE]: '\\x1b[38;5;208m',\n  [UNCOLOR]: '\\x1b[0m'\n};\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\n/* c8 ignore start */\nconst computeBrowserLoggingArgs = args => {\n  const strBuilder = [];\n  const styles = [];\n  const currentStyle = map.create();\n  /**\n   * @type {Array<string|Object|number>}\n   */\n  let logArgs = [];\n  // try with formatting until we find something unsupported\n  let i = 0;\n  for (; i < args.length; i++) {\n    const arg = args[i];\n    // @ts-ignore\n    const style = _browserStyleMap[arg];\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right);\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        const style = dom.mapToStyleString(currentStyle);\n        if (i > 0 || style.length > 0) {\n          strBuilder.push('%c' + arg);\n          styles.push(style);\n        } else {\n          strBuilder.push(arg);\n        }\n      } else {\n        break;\n      }\n    }\n  }\n  if (i > 0) {\n    // create logArgs with what we have so far\n    logArgs = styles;\n    logArgs.unshift(strBuilder.join(''));\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i];\n    if (!(arg instanceof Symbol)) {\n      logArgs.push(arg);\n    }\n  }\n  return logArgs;\n};\n/* c8 ignore stop */\n\n/* c8 ignore start */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\nconst computeNoColorLoggingArgs = args => {\n  const strBuilder = [];\n  const logArgs = [];\n  // try with formatting until we find something unsupported\n  let i = 0;\n  for (; i < args.length; i++) {\n    const arg = args[i];\n    // @ts-ignore\n    const style = _nodeStyleMap[arg];\n    if (style === undefined) {\n      if (arg.constructor === String || arg.constructor === Number) {\n        strBuilder.push(arg);\n      } else {\n        break;\n      }\n    }\n  }\n  if (i > 0) {\n    logArgs.push(strBuilder.join(''));\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i];\n    if (!(arg instanceof Symbol)) {\n      if (arg.constructor === Object) {\n        logArgs.push(JSON.stringify(arg));\n      } else {\n        logArgs.push(arg);\n      }\n    }\n  }\n  return logArgs;\n};\n/* c8 ignore stop */\n\n/* c8 ignore start */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\nconst computeNodeLoggingArgs = args => {\n  const strBuilder = [];\n  const logArgs = [];\n  // try with formatting until we find something unsupported\n  let i = 0;\n  for (; i < args.length; i++) {\n    const arg = args[i];\n    // @ts-ignore\n    const style = _nodeStyleMap[arg];\n    if (style !== undefined) {\n      strBuilder.push(style);\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        strBuilder.push(arg);\n      } else {\n        break;\n      }\n    }\n  }\n  if (i > 0) {\n    // create logArgs with what we have so far\n    strBuilder.push('\\x1b[0m');\n    logArgs.push(strBuilder.join(''));\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i];\n    if (!(arg instanceof Symbol)) {\n      logArgs.push(arg);\n    }\n  }\n  return logArgs;\n};\n/* c8 ignore stop */\n\n/* c8 ignore start */\nconst computeLoggingArgs = env.supportsColor ? env.isNode ? computeNodeLoggingArgs : computeBrowserLoggingArgs : computeNoColorLoggingArgs;\n/* c8 ignore stop */\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const print = function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  console.log(...computeLoggingArgs(args));\n  /* c8 ignore next */\n  vconsoles.forEach(vc => vc.print(args));\n};\n\n/* c8 ignore start */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const warn = function () {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n  console.warn(...computeLoggingArgs(args));\n  args.unshift(ORANGE);\n  vconsoles.forEach(vc => vc.print(args));\n};\n/* c8 ignore stop */\n\n/**\n * @param {Error} err\n */\n/* c8 ignore start */\nexport const printError = err => {\n  console.error(err);\n  vconsoles.forEach(vc => vc.printError(err));\n};\n/* c8 ignore stop */\n\n/**\n * @param {string} url image location\n * @param {number} height height of the image in pixel\n */\n/* c8 ignore start */\nexport const printImg = (url, height) => {\n  if (env.isBrowser) {\n    console.log('%c                      ', `font-size: ${height}px; background-size: contain; background-repeat: no-repeat; background-image: url(${url})`);\n    // console.log('%c                ', `font-size: ${height}x; background: url(${url}) no-repeat;`)\n  }\n\n  vconsoles.forEach(vc => vc.printImg(url, height));\n};\n/* c8 ignore stop */\n\n/**\n * @param {string} base64\n * @param {number} height\n */\n/* c8 ignore next 2 */\nexport const printImgBase64 = (base64, height) => printImg(`data:image/gif;base64,${base64}`, height);\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const group = function () {\n  for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    args[_key3] = arguments[_key3];\n  }\n  console.group(...computeLoggingArgs(args));\n  /* c8 ignore next */\n  vconsoles.forEach(vc => vc.group(args));\n};\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const groupCollapsed = function () {\n  for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    args[_key4] = arguments[_key4];\n  }\n  console.groupCollapsed(...computeLoggingArgs(args));\n  /* c8 ignore next */\n  vconsoles.forEach(vc => vc.groupCollapsed(args));\n};\nexport const groupEnd = () => {\n  console.groupEnd();\n  /* c8 ignore next */\n  vconsoles.forEach(vc => vc.groupEnd());\n};\n\n/**\n * @param {function():Node} createNode\n */\n/* c8 ignore next 2 */\nexport const printDom = createNode => vconsoles.forEach(vc => vc.printDom(createNode()));\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {number} height\n */\n/* c8 ignore next 2 */\nexport const printCanvas = (canvas, height) => printImg(canvas.toDataURL(), height);\nexport const vconsoles = set.create();\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<Element>}\n */\n/* c8 ignore start */\nconst _computeLineSpans = args => {\n  const spans = [];\n  const currentStyle = new Map();\n  // try with formatting until we find something unsupported\n  let i = 0;\n  for (; i < args.length; i++) {\n    const arg = args[i];\n    // @ts-ignore\n    const style = _browserStyleMap[arg];\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right);\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        // @ts-ignore\n        const span = dom.element('span', [pair.create('style', dom.mapToStyleString(currentStyle))], [dom.text(arg.toString())]);\n        if (span.innerHTML === '') {\n          span.innerHTML = '&nbsp;';\n        }\n        spans.push(span);\n      } else {\n        break;\n      }\n    }\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    let content = args[i];\n    if (!(content instanceof Symbol)) {\n      if (content.constructor !== String && content.constructor !== Number) {\n        content = ' ' + json.stringify(content) + ' ';\n      }\n      spans.push(dom.element('span', [], [dom.text( /** @type {string} */content)]));\n    }\n  }\n  return spans;\n};\n/* c8 ignore stop */\n\nconst lineStyle = 'font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;';\n\n/* c8 ignore start */\nexport class VConsole {\n  /**\n   * @param {Element} dom\n   */\n  constructor(dom) {\n    this.dom = dom;\n    /**\n     * @type {Element}\n     */\n    this.ccontainer = this.dom;\n    this.depth = 0;\n    vconsoles.add(this);\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   * @param {boolean} collapsed\n   */\n  group(args) {\n    let collapsed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    eventloop.enqueue(() => {\n      const triangleDown = dom.element('span', [pair.create('hidden', collapsed), pair.create('style', 'color:grey;font-size:120%;')], [dom.text('▼')]);\n      const triangleRight = dom.element('span', [pair.create('hidden', !collapsed), pair.create('style', 'color:grey;font-size:125%;')], [dom.text('▶')]);\n      const content = dom.element('div', [pair.create('style', `${lineStyle};padding-left:${this.depth * 10}px`)], [triangleDown, triangleRight, dom.text(' ')].concat(_computeLineSpans(args)));\n      const nextContainer = dom.element('div', [pair.create('hidden', collapsed)]);\n      const nextLine = dom.element('div', [], [content, nextContainer]);\n      dom.append(this.ccontainer, [nextLine]);\n      this.ccontainer = nextContainer;\n      this.depth++;\n      // when header is clicked, collapse/uncollapse container\n      dom.addEventListener(content, 'click', _event => {\n        nextContainer.toggleAttribute('hidden');\n        triangleDown.toggleAttribute('hidden');\n        triangleRight.toggleAttribute('hidden');\n      });\n    });\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  groupCollapsed(args) {\n    this.group(args, true);\n  }\n  groupEnd() {\n    eventloop.enqueue(() => {\n      if (this.depth > 0) {\n        this.depth--;\n        // @ts-ignore\n        this.ccontainer = this.ccontainer.parentElement.parentElement;\n      }\n    });\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  print(args) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [dom.element('div', [pair.create('style', `${lineStyle};padding-left:${this.depth * 10}px`)], _computeLineSpans(args))]);\n    });\n  }\n\n  /**\n   * @param {Error} err\n   */\n  printError(err) {\n    this.print([RED, BOLD, err.toString()]);\n  }\n\n  /**\n   * @param {string} url\n   * @param {number} height\n   */\n  printImg(url, height) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [dom.element('img', [pair.create('src', url), pair.create('height', `${math.round(height * 1.5)}px`)])]);\n    });\n  }\n\n  /**\n   * @param {Node} node\n   */\n  printDom(node) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [node]);\n    });\n  }\n  destroy() {\n    eventloop.enqueue(() => {\n      vconsoles.delete(this);\n    });\n  }\n}\n/* c8 ignore stop */\n\n/**\n * @param {Element} dom\n */\n/* c8 ignore next */\nexport const createVConsole = dom => new VConsole(dom);\nconst loggingColors = [GREEN, PURPLE, ORANGE, BLUE];\nlet nextColor = 0;\nlet lastLoggingTime = time.getUnixTime();\n\n/* c8 ignore start */\n/**\n * @param {string} moduleName\n * @return {function(...any):void}\n */\nexport const createModuleLogger = moduleName => {\n  const color = loggingColors[nextColor];\n  const debugRegexVar = env.getVariable('log');\n  const doLogging = debugRegexVar !== null && (debugRegexVar === '*' || debugRegexVar === 'true' || new RegExp(debugRegexVar, 'gi').test(moduleName));\n  nextColor = (nextColor + 1) % loggingColors.length;\n  moduleName += ': ';\n  return !doLogging ? func.nop : function () {\n    const timeNow = time.getUnixTime();\n    const timeDiff = timeNow - lastLoggingTime;\n    lastLoggingTime = timeNow;\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n    print(color, moduleName, UNCOLOR, ...args.map(arg => typeof arg === 'string' || typeof arg === 'symbol' ? arg : JSON.stringify(arg)), color, ' +' + timeDiff + 'ms');\n  };\n};\n/* c8 ignore stop */","map":{"version":3,"names":["env","set","symbol","pair","dom","json","map","eventloop","math","time","func","BOLD","create","UNBOLD","BLUE","GREY","GREEN","RED","PURPLE","ORANGE","UNCOLOR","_browserStyleMap","_nodeStyleMap","computeBrowserLoggingArgs","args","strBuilder","styles","currentStyle","logArgs","i","length","arg","style","undefined","left","right","constructor","String","Number","mapToStyleString","push","unshift","join","Symbol","computeNoColorLoggingArgs","Object","JSON","stringify","computeNodeLoggingArgs","computeLoggingArgs","supportsColor","isNode","print","_len","arguments","Array","_key","console","log","vconsoles","forEach","vc","warn","_len2","_key2","printError","err","error","printImg","url","height","isBrowser","printImgBase64","base64","group","_len3","_key3","groupCollapsed","_len4","_key4","groupEnd","printDom","createNode","printCanvas","canvas","toDataURL","_computeLineSpans","spans","Map","span","element","text","toString","innerHTML","content","lineStyle","VConsole","ccontainer","depth","add","collapsed","enqueue","triangleDown","triangleRight","concat","nextContainer","nextLine","append","addEventListener","_event","toggleAttribute","parentElement","round","node","destroy","delete","createVConsole","loggingColors","nextColor","lastLoggingTime","getUnixTime","createModuleLogger","moduleName","color","debugRegexVar","getVariable","doLogging","RegExp","test","nop","timeNow","timeDiff","_len5","_key5"],"sources":["C:/Users/dzung/project/cloudy/client/cloudy_ide/node_modules/lib0/logging.js"],"sourcesContent":["/**\n * Isomorphic logging module with support for colors!\n *\n * @module logging\n */\n\nimport * as env from './environment.js'\nimport * as set from './set.js'\nimport * as symbol from './symbol.js'\nimport * as pair from './pair.js'\nimport * as dom from './dom.js'\nimport * as json from './json.js'\nimport * as map from './map.js'\nimport * as eventloop from './eventloop.js'\nimport * as math from './math.js'\nimport * as time from './time.js'\nimport * as func from './function.js'\n\nexport const BOLD = symbol.create()\nexport const UNBOLD = symbol.create()\nexport const BLUE = symbol.create()\nexport const GREY = symbol.create()\nexport const GREEN = symbol.create()\nexport const RED = symbol.create()\nexport const PURPLE = symbol.create()\nexport const ORANGE = symbol.create()\nexport const UNCOLOR = symbol.create()\n\n/**\n * @type {Object<Symbol,pair.Pair<string,string>>}\n */\nconst _browserStyleMap = {\n  [BOLD]: pair.create('font-weight', 'bold'),\n  [UNBOLD]: pair.create('font-weight', 'normal'),\n  [BLUE]: pair.create('color', 'blue'),\n  [GREEN]: pair.create('color', 'green'),\n  [GREY]: pair.create('color', 'grey'),\n  [RED]: pair.create('color', 'red'),\n  [PURPLE]: pair.create('color', 'purple'),\n  [ORANGE]: pair.create('color', 'orange'), // not well supported in chrome when debugging node with inspector - TODO: deprecate\n  [UNCOLOR]: pair.create('color', 'black')\n}\n\nconst _nodeStyleMap = {\n  [BOLD]: '\\u001b[1m',\n  [UNBOLD]: '\\u001b[2m',\n  [BLUE]: '\\x1b[34m',\n  [GREEN]: '\\x1b[32m',\n  [GREY]: '\\u001b[37m',\n  [RED]: '\\x1b[31m',\n  [PURPLE]: '\\x1b[35m',\n  [ORANGE]: '\\x1b[38;5;208m',\n  [UNCOLOR]: '\\x1b[0m'\n}\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\n/* c8 ignore start */\nconst computeBrowserLoggingArgs = (args) => {\n  const strBuilder = []\n  const styles = []\n  const currentStyle = map.create()\n  /**\n   * @type {Array<string|Object|number>}\n   */\n  let logArgs = []\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _browserStyleMap[arg]\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right)\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        const style = dom.mapToStyleString(currentStyle)\n        if (i > 0 || style.length > 0) {\n          strBuilder.push('%c' + arg)\n          styles.push(style)\n        } else {\n          strBuilder.push(arg)\n        }\n      } else {\n        break\n      }\n    }\n  }\n  if (i > 0) {\n    // create logArgs with what we have so far\n    logArgs = styles\n    logArgs.unshift(strBuilder.join(''))\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    if (!(arg instanceof Symbol)) {\n      logArgs.push(arg)\n    }\n  }\n  return logArgs\n}\n/* c8 ignore stop */\n\n/* c8 ignore start */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\nconst computeNoColorLoggingArgs = args => {\n  const strBuilder = []\n  const logArgs = []\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _nodeStyleMap[arg]\n    if (style === undefined) {\n      if (arg.constructor === String || arg.constructor === Number) {\n        strBuilder.push(arg)\n      } else {\n        break\n      }\n    }\n  }\n  if (i > 0) {\n    logArgs.push(strBuilder.join(''))\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    if (!(arg instanceof Symbol)) {\n      if (arg.constructor === Object) {\n        logArgs.push(JSON.stringify(arg))\n      } else {\n        logArgs.push(arg)\n      }\n    }\n  }\n  return logArgs\n}\n/* c8 ignore stop */\n\n/* c8 ignore start */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\nconst computeNodeLoggingArgs = (args) => {\n  const strBuilder = []\n  const logArgs = []\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _nodeStyleMap[arg]\n    if (style !== undefined) {\n      strBuilder.push(style)\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        strBuilder.push(arg)\n      } else {\n        break\n      }\n    }\n  }\n  if (i > 0) {\n    // create logArgs with what we have so far\n    strBuilder.push('\\x1b[0m')\n    logArgs.push(strBuilder.join(''))\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    if (!(arg instanceof Symbol)) {\n      logArgs.push(arg)\n    }\n  }\n  return logArgs\n}\n/* c8 ignore stop */\n\n/* c8 ignore start */\nconst computeLoggingArgs = env.supportsColor\n  ? (env.isNode ? computeNodeLoggingArgs : computeBrowserLoggingArgs)\n  : computeNoColorLoggingArgs\n/* c8 ignore stop */\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const print = (...args) => {\n  console.log(...computeLoggingArgs(args))\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.print(args))\n}\n\n/* c8 ignore start */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const warn = (...args) => {\n  console.warn(...computeLoggingArgs(args))\n  args.unshift(ORANGE)\n  vconsoles.forEach((vc) => vc.print(args))\n}\n/* c8 ignore stop */\n\n/**\n * @param {Error} err\n */\n/* c8 ignore start */\nexport const printError = (err) => {\n  console.error(err)\n  vconsoles.forEach((vc) => vc.printError(err))\n}\n/* c8 ignore stop */\n\n/**\n * @param {string} url image location\n * @param {number} height height of the image in pixel\n */\n/* c8 ignore start */\nexport const printImg = (url, height) => {\n  if (env.isBrowser) {\n    console.log(\n      '%c                      ',\n      `font-size: ${height}px; background-size: contain; background-repeat: no-repeat; background-image: url(${url})`\n    )\n    // console.log('%c                ', `font-size: ${height}x; background: url(${url}) no-repeat;`)\n  }\n  vconsoles.forEach((vc) => vc.printImg(url, height))\n}\n/* c8 ignore stop */\n\n/**\n * @param {string} base64\n * @param {number} height\n */\n/* c8 ignore next 2 */\nexport const printImgBase64 = (base64, height) =>\n  printImg(`data:image/gif;base64,${base64}`, height)\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const group = (...args) => {\n  console.group(...computeLoggingArgs(args))\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.group(args))\n}\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const groupCollapsed = (...args) => {\n  console.groupCollapsed(...computeLoggingArgs(args))\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.groupCollapsed(args))\n}\n\nexport const groupEnd = () => {\n  console.groupEnd()\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.groupEnd())\n}\n\n/**\n * @param {function():Node} createNode\n */\n/* c8 ignore next 2 */\nexport const printDom = (createNode) =>\n  vconsoles.forEach((vc) => vc.printDom(createNode()))\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {number} height\n */\n/* c8 ignore next 2 */\nexport const printCanvas = (canvas, height) =>\n  printImg(canvas.toDataURL(), height)\n\nexport const vconsoles = set.create()\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<Element>}\n */\n/* c8 ignore start */\nconst _computeLineSpans = (args) => {\n  const spans = []\n  const currentStyle = new Map()\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _browserStyleMap[arg]\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right)\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        // @ts-ignore\n        const span = dom.element('span', [\n          pair.create('style', dom.mapToStyleString(currentStyle))\n        ], [dom.text(arg.toString())])\n        if (span.innerHTML === '') {\n          span.innerHTML = '&nbsp;'\n        }\n        spans.push(span)\n      } else {\n        break\n      }\n    }\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    let content = args[i]\n    if (!(content instanceof Symbol)) {\n      if (content.constructor !== String && content.constructor !== Number) {\n        content = ' ' + json.stringify(content) + ' '\n      }\n      spans.push(\n        dom.element('span', [], [dom.text(/** @type {string} */ (content))])\n      )\n    }\n  }\n  return spans\n}\n/* c8 ignore stop */\n\nconst lineStyle =\n  'font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;'\n\n/* c8 ignore start */\nexport class VConsole {\n  /**\n   * @param {Element} dom\n   */\n  constructor (dom) {\n    this.dom = dom\n    /**\n     * @type {Element}\n     */\n    this.ccontainer = this.dom\n    this.depth = 0\n    vconsoles.add(this)\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   * @param {boolean} collapsed\n   */\n  group (args, collapsed = false) {\n    eventloop.enqueue(() => {\n      const triangleDown = dom.element('span', [\n        pair.create('hidden', collapsed),\n        pair.create('style', 'color:grey;font-size:120%;')\n      ], [dom.text('▼')])\n      const triangleRight = dom.element('span', [\n        pair.create('hidden', !collapsed),\n        pair.create('style', 'color:grey;font-size:125%;')\n      ], [dom.text('▶')])\n      const content = dom.element(\n        'div',\n        [pair.create(\n          'style',\n          `${lineStyle};padding-left:${this.depth * 10}px`\n        )],\n        [triangleDown, triangleRight, dom.text(' ')].concat(\n          _computeLineSpans(args)\n        )\n      )\n      const nextContainer = dom.element('div', [\n        pair.create('hidden', collapsed)\n      ])\n      const nextLine = dom.element('div', [], [content, nextContainer])\n      dom.append(this.ccontainer, [nextLine])\n      this.ccontainer = nextContainer\n      this.depth++\n      // when header is clicked, collapse/uncollapse container\n      dom.addEventListener(content, 'click', (_event) => {\n        nextContainer.toggleAttribute('hidden')\n        triangleDown.toggleAttribute('hidden')\n        triangleRight.toggleAttribute('hidden')\n      })\n    })\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  groupCollapsed (args) {\n    this.group(args, true)\n  }\n\n  groupEnd () {\n    eventloop.enqueue(() => {\n      if (this.depth > 0) {\n        this.depth--\n        // @ts-ignore\n        this.ccontainer = this.ccontainer.parentElement.parentElement\n      }\n    })\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  print (args) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [\n        dom.element('div', [\n          pair.create(\n            'style',\n            `${lineStyle};padding-left:${this.depth * 10}px`\n          )\n        ], _computeLineSpans(args))\n      ])\n    })\n  }\n\n  /**\n   * @param {Error} err\n   */\n  printError (err) {\n    this.print([RED, BOLD, err.toString()])\n  }\n\n  /**\n   * @param {string} url\n   * @param {number} height\n   */\n  printImg (url, height) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [\n        dom.element('img', [\n          pair.create('src', url),\n          pair.create('height', `${math.round(height * 1.5)}px`)\n        ])\n      ])\n    })\n  }\n\n  /**\n   * @param {Node} node\n   */\n  printDom (node) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [node])\n    })\n  }\n\n  destroy () {\n    eventloop.enqueue(() => {\n      vconsoles.delete(this)\n    })\n  }\n}\n/* c8 ignore stop */\n\n/**\n * @param {Element} dom\n */\n/* c8 ignore next */\nexport const createVConsole = (dom) => new VConsole(dom)\n\nconst loggingColors = [GREEN, PURPLE, ORANGE, BLUE]\nlet nextColor = 0\nlet lastLoggingTime = time.getUnixTime()\n\n/* c8 ignore start */\n/**\n * @param {string} moduleName\n * @return {function(...any):void}\n */\nexport const createModuleLogger = (moduleName) => {\n  const color = loggingColors[nextColor]\n  const debugRegexVar = env.getVariable('log')\n  const doLogging = debugRegexVar !== null &&\n    (debugRegexVar === '*' || debugRegexVar === 'true' ||\n      new RegExp(debugRegexVar, 'gi').test(moduleName))\n  nextColor = (nextColor + 1) % loggingColors.length\n  moduleName += ': '\n\n  return !doLogging\n    ? func.nop\n    : (...args) => {\n      const timeNow = time.getUnixTime()\n      const timeDiff = timeNow - lastLoggingTime\n      lastLoggingTime = timeNow\n      print(\n        color,\n        moduleName,\n        UNCOLOR,\n        ...args.map((arg) =>\n          (typeof arg === 'string' || typeof arg === 'symbol')\n            ? arg\n            : JSON.stringify(arg)\n        ),\n        color,\n        ' +' + timeDiff + 'ms'\n      )\n    }\n}\n/* c8 ignore stop */\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}